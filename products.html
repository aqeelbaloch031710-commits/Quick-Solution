<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quick Solution | Products</title>
<meta name="description" content="Quick Solution - shop via WhatsApp. Fast delivery across Pakistan." />
<style>
  :root{
    --primary:#0d47a1;
    --accent:#42a5f5;
    --card-bg:#fff;
    --muted:#666;
    --radius:12px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:#f4f7fb;
    color:#222;
    -webkit-font-smoothing:antialiased;
  }

  /* Header */
  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:16px;
    padding:14px 18px;
    background:linear-gradient(135deg,var(--primary),#1976d2,var(--accent));
    color:#fff;
  }
  .logo{
    display:flex;
    align-items:center;
    gap:12px;
  }
  .logo img{
    max-width:140px;
    width:100%;
    height:auto;
    display:block;
  }
  nav a{
    color:#fff;
    text-decoration:none;
    margin-left:14px;
    font-weight:600;
    font-size:14px;
  }

  main{padding:22px; max-width:1200px; margin:0 auto;}

  /* Grid */
  .products{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
    gap:22px;
    margin-top:18px;
  }

  .product{
    background:var(--card-bg);
    border-radius:var(--radius);
    padding:14px;
    box-shadow:0 8px 20px rgba(15,30,60,0.08);
    display:flex;
    flex-direction:column;
    gap:12px;
    overflow:visible;
  }

  /* Carousel container */
  .carousel{
    position:relative;
    border-radius:10px;
    overflow:hidden;
    background:#f8fafc;
  }

  .carousel-track{
    display:flex;
    transition:transform .35s ease;
    will-change:transform;
  }

  .carousel-slide{
    min-width:100%;
    user-select:none;
    touch-action:pan-y;
    position:relative;
  }

  .carousel-slide img{
    display:block;
    width:100%;
    height:260px;
    object-fit:cover;
    border-radius:10px;
    transition:transform .35s ease;
    transform-origin:center center;
    cursor:zoom-in;
    background:#eee;
  }

  /* Desktop hover zoom */
  @media (hover: hover) and (pointer: fine){
    .carousel-slide img:hover{
      transform:scale(1.15);
      cursor:zoom-in;
    }
  }

  /* Mobile: tap to zoom (toggle) */
  .carousel-slide img.zoomed{
    transform:scale(2);
    cursor:grab;
  }

  /* arrows */
  .arrow{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    background:rgba(0,0,0,0.45);
    color:#fff;
    border:none;
    width:36px;
    height:36px;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    z-index:6;
  }
  .arrow.left{left:10px}
  .arrow.right{right:10px}

  /* dots */
  .dots{
    display:flex;
    gap:8px;
    justify-content:center;
    padding:10px 0 6px;
  }
  .dot{
    width:9px;height:9px;border-radius:50%;background:#d6dbe6;cursor:pointer;
  }
  .dot.active{background:var(--primary)}

  /* Product info */
  .product h3{margin:0;color:var(--primary);font-size:18px}
  .product p{margin:0;color:var(--muted);font-size:14px}
  .price{font-weight:700;margin-top:6px;color:#111}

  .actions{
    margin-top:auto;
    display:flex;
    gap:10px;
  }
  .btn{
    border:0;padding:10px 12px;border-radius:10px;font-weight:700;cursor:pointer;
  }
  .btn-primary{
    background:linear-gradient(135deg,var(--primary),var(--accent));
    color:#fff;flex:1;
  }
  .btn-outline{
    background:transparent;border:2px solid #e6eefc;color:var(--primary);min-width:120px;
  }

  /* Modal (cart / booking) */
  .modal-backdrop{
    position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;padding:20px;z-index:40;
  }
  .modal{
    width:100%;max-width:520px;background:#fff;border-radius:12px;padding:18px;box-shadow:0 20px 50px rgba(10,20,40,0.3);
  }
  .modal h4{margin:0 0 8px;color:var(--primary)}
  .cart-item{display:flex;gap:12px;align-items:center;padding:10px 0;border-bottom:1px solid #f1f5fb}
  .cart-item img{width:72px;height:72px;object-fit:cover;border-radius:8px}
  .cart-item .meta{flex:1}
  .qty-controls{display:flex;align-items:center;gap:8px}
  .qty-controls button{width:34px;height:34px;border-radius:8px;border:1px solid #e6eefc;background:#fff;cursor:pointer}
  .modal-footer{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
  .total{font-weight:800;color:#111;margin-top:10px;text-align:right}

  /* small screens */
  @media (max-width:520px){
    .carousel-slide img{height:200px}
    .logo img{max-width:110px}
  }
</style>
</head>
<body>

<header>
  <div class="logo">
    <img src="Solution-removebg-preview.png" alt="Quick Solution Logo">
  </div>
  <nav>
    <a href="#products">Products</a>
    <a href="https://wa.me/923182086906" target="_blank" rel="noopener">Contact</a>
  </nav>
</header>

<main>
  <section id="products">
    <h1 style="text-align:center;color:var(--primary);margin:6px 0 2px">Quick Solution Products</h1>
    <p style="text-align:center;color:var(--muted);margin:0 0 18px">Tap images to zoom on mobile. Add items to cart and confirm via WhatsApp.</p>

    <div class="products" id="productGrid">
      <!-- Products will be injected by JS -->
    </div>
  </section>
</main>

<!-- Modal / Booking -->
<div class="modal-backdrop" id="cartModal" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="modal" role="document" aria-labelledby="cartTitle">
    <h4 id="cartTitle">Your Booking</h4>
    <div id="cartItems"></div>

    <div class="total" id="cartTotal">Total: Rs. 0</div>

    <div class="modal-footer">
      <button class="btn btn-outline" id="cancelBtn">Cancel</button>
      <button class="btn btn-primary" id="confirmBtn">Confirm & Send WhatsApp</button>
    </div>
  </div>
</div>

<footer style="text-align:center;padding:18px;background:var(--primary);color:#fff;margin-top:26px">
  © 2026 Quick Solution — Online Shopping Made Easy
</footer>

<script>
/* ---------- Sample product data ----------
   Replace image paths with your actual files.
   Each product has id, title, price, description, images[].
-------------------------------------------*/
const products = [
  {
    id: 'p1',
    title: 'Smart Phone',
    price: 1500,
    desc: 'Latest smartphone with high performance.',
    images: ['img/product1-1.jpg','img/product1-2.jpg','img/product1-3.jpg']
  },
  {
    id: 'p2',
    title: 'Wireless Headphones',
    price: 2200,
    desc: 'Noise cancelling, long battery life.',
    images: ['img/product2-1.jpg','img/product2-2.jpg','img/product2-3.jpg']
  },
  {
    id: 'p3',
    title: 'Smart Watch',
    price: 1800,
    desc: 'Track health and fitness easily.',
    images: ['img/product3-1.jpg','img/product3-2.jpg','img/product3-3.jpg']
  }
];

/* ---------- State ----------
--------------------------------*/
const cart = {}; // { productId: {product, qty} }

/* ---------- Utilities ----------
--------------------------------*/
const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));

/* ---------- Render products ----------
--------------------------------*/
function createProductCard(product){
  const el = document.createElement('article');
  el.className = 'product';
  el.innerHTML = `
    <div class="carousel" data-id="${product.id}">
      <button class="arrow left" aria-label="Previous image">&lt;</button>
      <div class="carousel-track" aria-hidden="false">
        ${product.images.map(src => `
          <div class="carousel-slide">
            <img src="${src}" alt="${product.title}">
          </div>`).join('')}
      </div>
      <button class="arrow right" aria-label="Next image">&gt;</button>
      <div class="dots" role="tablist">
        ${product.images.map((_,i)=>`<div class="dot ${i===0? 'active':''}" data-index="${i}" role="tab" aria-selected="${i===0}"></div>`).join('')}
      </div>
    </div>

    <h3>${product.title}</h3>
    <p>${product.desc}</p>
    <div class="price">Rs. ${product.price}</div>

    <div class="actions">
      <button class="btn btn-outline" data-action="view" data-id="${product.id}">View</button>
      <button class="btn btn-primary" data-action="add" data-id="${product.id}">Add to cart</button>
    </div>
  `;
  return el;
}

const grid = $('#productGrid');
products.forEach(p => grid.appendChild(createProductCard(p)));

/* ---------- Carousel behavior (arrows, dots, swipe) ----------
   Supports multiple carousels on page.
----------------------------------------------------------------*/
function initCarousels(){
  const carousels = $$('.carousel');
  carousels.forEach(car => {
    const track = car.querySelector('.carousel-track');
    const slides = Array.from(track.children);
    const left = car.querySelector('.arrow.left');
    const right = car.querySelector('.arrow.right');
    const dots = Array.from(car.querySelectorAll('.dot'));
    let index = 0;
    let startX = 0, currentX = 0, dragging=false;

    function update(){
      track.style.transform = `translateX(-${index * 100}%)`;
      dots.forEach((d,i)=> {
        d.classList.toggle('active', i===index);
        d.setAttribute('aria-selected', i===index);
      });
    }

    left.addEventListener('click', ()=> { index = Math.max(0, index-1); update(); });
    right.addEventListener('click', ()=> { index = Math.min(slides.length-1, index+1); update(); });

    dots.forEach(d => d.addEventListener('click', e => {
      index = Number(e.currentTarget.dataset.index);
      update();
    }));

    // Touch / swipe
    track.addEventListener('touchstart', e => {
      startX = e.touches[0].clientX;
      dragging = true;
      track.style.transition = 'none';
    }, {passive:true});

    track.addEventListener('touchmove', e => {
      if(!dragging) return;
      currentX = e.touches[0].clientX;
      const dx = currentX - startX;
      track.style.transform = `translateX(calc(-${index * 100}% + ${dx}px))`;
    }, {passive:true});

    track.addEventListener('touchend', e => {
      dragging = false;
      track.style.transition = '';
      const dx = currentX - startX;
      if(Math.abs(dx) > 50){
        if(dx < 0) index = Math.min(slides.length-1, index+1);
        else index = Math.max(0, index-1);
      }
      update();
      startX = currentX = 0;
    });

    // Mouse drag for desktop (optional)
    let mouseDown=false, mouseStartX=0, mouseCurrentX=0;
    track.addEventListener('mousedown', e => {
      mouseDown=true; mouseStartX=e.clientX; track.style.transition='none';
    });
    window.addEventListener('mousemove', e => {
      if(!mouseDown) return;
      mouseCurrentX = e.clientX;
      const dx = mouseCurrentX - mouseStartX;
      track.style.transform = `translateX(calc(-${index * 100}% + ${dx}px))`;
    });
    window.addEventListener('mouseup', e => {
      if(!mouseDown) return;
      mouseDown=false; track.style.transition='';
      const dx = mouseCurrentX - mouseStartX;
      if(Math.abs(dx) > 60){
        if(dx < 0) index = Math.min(slides.length-1, index+1);
        else index = Math.max(0, index-1);
      }
      update();
    });

    // Image zoom/tap behavior
    slides.forEach(slide => {
      const img = slide.querySelector('img');

      // Desktop: CSS hover handles zoom. For mobile, toggle zoom on tap.
      let lastTap = 0;
      img.addEventListener('touchend', e => {
        const now = Date.now();
        // double-tap to zoom
        if(now - lastTap < 300){
          toggleZoom(img);
        } else {
          // single tap: small delay to allow double-tap detection
          setTimeout(()=>{}, 250);
        }
        lastTap = now;
      });

      // For accessibility: allow click to toggle zoom on non-touch devices
      img.addEventListener('click', e => {
        if(window.matchMedia('(hover: none)').matches) return; // mobile handled by touch
        // On desktop, clicking should open a larger view; we'll toggle zoom for keyboard users
        toggleZoom(img);
      });

      // When zoomed, allow panning via touchmove
      let isZoomed=false, startTouchX=0, startTouchY=0, originX=0, originY=0;
      function toggleZoom(image){
        isZoomed = !image.classList.contains('zoomed');
        if(isZoomed){
          image.classList.add('zoomed');
          image.style.transition = 'transform .15s ease';
          image.style.transformOrigin = 'center center';
          image.parentElement.style.overflow = 'hidden';
        } else {
          image.classList.remove('zoomed');
          image.style.transform = '';
          image.style.left = '';
          image.style.top = '';
          image.parentElement.style.overflow = '';
        }
      }

      // Pan handling for zoomed image (touch)
      img.addEventListener('touchstart', e => {
        if(!img.classList.contains('zoomed')) return;
        const t = e.touches[0];
        startTouchX = t.clientX; startTouchY = t.clientY;
        originX = parseFloat(img.dataset.offsetX || 0);
        originY = parseFloat(img.dataset.offsetY || 0);
      }, {passive:true});

      img.addEventListener('touchmove', e => {
        if(!img.classList.contains('zoomed')) return;
        const t = e.touches[0];
        const dx = t.clientX - startTouchX;
        const dy = t.clientY - startTouchY;
        // translate by adjusting transform-origin and translate
        img.style.transform = `scale(2) translate(${(originX + dx/2)}px, ${(originY + dy/2)}px)`;
        img.dataset.offsetX = originX + dx/2;
        img.dataset.offsetY = originY + dy/2;
      }, {passive:true});
    });

    // initial update
    update();
  });
}

/* ---------- Add to cart & modal ----------
--------------------------------*/
const cartModal = $('#cartModal');
const cartItemsEl = $('#cartItems');
const cartTotalEl = $('#cartTotal');

function openModal(){
  cartModal.style.display = 'flex';
  cartModal.setAttribute('aria-hidden','false');
  renderCart();
}
function closeModal(){
  cartModal.style.display = 'none';
  cartModal.setAttribute('aria-hidden','true');
}

function renderCart(){
  cartItemsEl.innerHTML = '';
  const entries = Object.values(cart);
  if(entries.length === 0){
    cartItemsEl.innerHTML = '<p style="color:var(--muted);margin:8px 0">Your cart is empty.</p>';
    cartTotalEl.textContent = 'Total: Rs. 0';
    return;
  }
  let total = 0;
  entries.forEach(item => {
    const row = document.createElement('div');
    row.className = 'cart-item';
    row.innerHTML = `
      <img src="${item.product.images[0]}" alt="${item.product.title}">
      <div class="meta">
        <div style="font-weight:700">${item.product.title}</div>
        <div style="color:var(--muted);font-size:13px">Rs. ${item.product.price} each</div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px">
        <div class="qty-controls" data-id="${item.product.id}">
          <button aria-label="Decrease quantity" data-op="dec">-</button>
          <div style="min-width:36px;text-align:center">${item.qty}</div>
          <button aria-label="Increase quantity" data-op="inc">+</button>
        </div>
        <div style="font-weight:700">Rs. ${item.qty * item.product.price}</div>
      </div>
    `;
    cartItemsEl.appendChild(row);
    total += item.qty * item.product.price;
  });
  cartTotalEl.textContent = `Total: Rs. ${total}`;
}

/* Handle qty buttons inside modal */
cartItemsEl.addEventListener('click', e => {
  const btn = e.target.closest('button');
  if(!btn) return;
  const parent = btn.closest('.qty-controls');
  if(!parent) return;
  const id = parent.dataset.id;
  const op = btn.dataset.op;
  if(!cart[id]) return;
  if(op === 'inc') cart[id].qty++;
  else if(op === 'dec') {
    cart[id].qty = Math.max(1, cart[id].qty - 1);
  }
  renderCart();
});

/* Confirm -> open WhatsApp with order summary */
$('#confirmBtn').addEventListener('click', () => {
  const entries = Object.values(cart);
  if(entries.length === 0) return;
  let message = 'Quick Solution Order:%0A';
  entries.forEach(it => {
    message += `${it.product.title} x ${it.qty} = Rs.${it.qty * it.product.price}%0A`;
  });
  const total = entries.reduce((s,it)=> s + it.qty * it.product.price, 0);
  message += `%0ATotal: Rs.${total}%0A%0APlease deliver to: `;
  const wa = `https://wa.me/923182086906?text=${message}`;
  window.open(wa, '_blank');
});

/* Cancel button */
$('#cancelBtn').addEventListener('click', closeModal);

/* Add to cart button handler and View button (open modal with that product preselected) */
document.body.addEventListener('click', e => {
  const btn = e.target.closest('button');
  if(!btn) return;
  const action = btn.dataset.action;
  const id = btn.dataset.id;
  if(!action) return;

  const product = products.find(p => p.id === id);
  if(!product) return;

  if(action === 'add'){
    if(!cart[id]) cart[id] = { product, qty: 1 };
    else cart[id].qty++;
    openModal();
  } else if(action === 'view'){
    // open modal with product added (if not present)
    if(!cart[id]) cart[id] = { product, qty: 1 };
    openModal();
  }
});

/* Close modal when clicking backdrop (but not when clicking inside modal) */
cartModal.addEventListener('click', e => {
  if(e.target === cartModal) closeModal();
});

/* Initialize */
initCarousels();

/* Render initial product cards (re-init carousels after DOM injection) */
(function reinit(){
  // Carousels were created earlier; ensure event handlers are attached after DOM ready
  // (initCarousels already called)
})();

</script>
</body>
</html>
