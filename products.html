<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quick Solution | Furniture</title>
<meta name="description" content="Quick Solution - premium sofas, ottomans, and stools. Order via WhatsApp. Fast delivery across Pakistan." />
<style>
  :root{
    --primary:#0d47a1;
    --accent:#42a5f5;
    --card-bg:#fff;
    --muted:#666;
    --radius:12px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:#f4f7fb;
    color:#222;
    -webkit-font-smoothing:antialiased;
  }

  /* Header */
  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:16px;
    padding:14px 18px;
    background:linear-gradient(135deg,var(--primary),#1976d2,var(--accent));
    color:#fff;
  }
  .logo img{max-width:140px;width:100%;height:auto;display:block}
  nav a{color:#fff;text-decoration:none;margin-left:14px;font-weight:600;font-size:14px}

  /* Cart icon */
  .cart-btn{
    position:relative;
    background:transparent;
    border:1px solid rgba(255,255,255,0.18);
    color:#fff;
    padding:8px 12px;
    border-radius:10px;
    display:inline-flex;
    gap:8px;
    align-items:center;
    cursor:pointer;
  }
  .cart-count{
    position:absolute;top:-6px;right:-6px;background:#ff3b30;color:#fff;width:20px;height:20px;border-radius:50%;
    display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;
  }

  main{padding:22px;max-width:1200px;margin:0 auto}

  /* Grid */
  .products{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:22px;margin-top:18px}
  .product{background:var(--card-bg);border-radius:var(--radius);padding:14px;box-shadow:0 8px 20px rgba(15,30,60,0.08);display:flex;flex-direction:column;gap:12px;overflow:visible}

  /* Carousel */
  .carousel{position:relative;border-radius:10px;overflow:hidden;background:#f8fafc}
  .carousel-track{display:flex;transition:transform .35s ease;will-change:transform}
  .carousel-slide{min-width:100%;user-select:none;touch-action:pan-y;position:relative}
  .carousel-slide img{display:block;width:100%;height:260px;object-fit:cover;border-radius:10px;transition:transform .35s ease;transform-origin:center center;cursor:zoom-in;background:#eee}
  @media (hover: hover) and (pointer: fine){ .carousel-slide img:hover{transform:scale(1.12);cursor:zoom-in} }
  .carousel-slide img.zoomed{transform:scale(2);cursor:grab}

  .arrow{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.45);color:#fff;border:none;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:6}
  .arrow.left{left:10px} .arrow.right{right:10px}
  .dots{display:flex;gap:8px;justify-content:center;padding:10px 0 6px}
  .dot{width:9px;height:9px;border-radius:50%;background:#d6dbe6;cursor:pointer}
  .dot.active{background:var(--primary)}

  .product h3{margin:0;color:var(--primary);font-size:18px}
  .product p{margin:0;color:var(--muted);font-size:14px}
  .price{font-weight:700;margin-top:6px;color:#111}

  .variant-row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .variant-btn{padding:6px 10px;border-radius:8px;border:1px solid #e6eefc;background:#fff;cursor:pointer;font-size:13px}
  .variant-btn.active{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;border-color:transparent}

  .actions{margin-top:auto;display:flex;gap:10px}
  .btn{border:0;padding:10px 12px;border-radius:10px;font-weight:700;cursor:pointer}
  .btn-primary{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;flex:1}
  .btn-outline{background:transparent;border:2px solid #e6eefc;color:var(--primary);min-width:120px}

  /* Modal / Cart */
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;padding:20px;z-index:40}
  .modal{width:100%;max-width:720px;background:#fff;border-radius:12px;padding:18px;box-shadow:0 20px 50px rgba(10,20,40,0.3)}
  .modal h4{margin:0 0 8px;color:var(--primary)}
  .cart-item{display:flex;gap:12px;align-items:center;padding:10px 0;border-bottom:1px solid #f1f5fb}
  .cart-item img{width:72px;height:72px;object-fit:cover;border-radius:8px}
  .cart-item .meta{flex:1}
  .qty-controls{display:flex;align-items:center;gap:8px}
  .qty-controls button{width:34px;height:34px;border-radius:8px;border:1px solid #e6eefc;background:#fff;cursor:pointer}
  .remove-btn{background:transparent;border:0;color:#ff3b30;font-weight:700;cursor:pointer;padding:6px 8px;border-radius:8px}
  .modal-footer{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}
  .total{font-weight:800;color:#111;margin-top:10px;text-align:right}
  .cart-actions{display:flex;gap:8px;align-items:center;justify-content:space-between;margin-top:12px}
  .small-muted{color:var(--muted);font-size:13px}

  /* Lightbox */
  .lightbox{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.85);z-index:60;padding:20px}
  .lightbox img{max-width:95%;max-height:95%;border-radius:8px;object-fit:contain}
  .lightbox .close{position:absolute;top:18px;right:18px;background:rgba(255,255,255,0.12);border:0;color:#fff;padding:8px 10px;border-radius:8px;cursor:pointer}

  @media (max-width:520px){ .carousel-slide img{height:200px} .logo img{max-width:110px} .modal{padding:12px} }
</style>
</head>
<body>

<header>
  <div class="logo"><img src="Solution-removebg-preview.png" alt="Quick Solution Logo"></div>
  <nav>
    <a href="#products">Products</a>
    <a href="https://wa.me/923182086906" target="_blank" rel="noopener">Contact</a>
    <button class="cart-btn" id="openCart" aria-label="Open cart">Cart <span class="cart-count" id="cartCount">0</span></button>
  </nav>
</header>

<main>
  <section id="products">
    <h1 style="text-align:center;color:var(--primary);margin:6px 0 2px">Quick Solution Furniture</h1>
    <p style="text-align:center;color:var(--muted);margin:0 0 18px">Premium sofas, ottomans, and stools. Tap images to zoom. Add items to cart and confirm via WhatsApp.</p>
    <div class="products" id="productGrid"></div>
  </section>
</main>

<!-- Cart Modal -->
<div class="modal-backdrop" id="cartModal" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="modal" role="document" aria-labelledby="cartTitle">
    <h4 id="cartTitle">Your Cart</h4>
    <div id="cartItems"></div>
    <div class="cart-actions">
      <div class="small-muted" id="cartSummary">0 items</div>
      <div style="display:flex;gap:8px">
        <button class="btn btn-outline" id="clearCartBtn">Clear Cart</button>
        <button class="btn btn-outline" id="continueBtn">Continue Shopping</button>
      </div>
    </div>
    <div class="total" id="cartTotal">Total: Rs. 0</div>
    <div class="modal-footer">
      <button class="btn btn-outline" id="cancelBtn">Close</button>
      <button class="btn btn-primary" id="confirmBtn">Confirm & Send WhatsApp</button>
    </div>
  </div>
</div>

<!-- Lightbox -->
<div class="lightbox" id="lightbox" aria-hidden="true">
  <button class="close" id="lightboxClose">Close</button>
  <img id="lightboxImg" alt="Product view">
</div>

<footer style="text-align:center;padding:18px;background:var(--primary);color:#fff;margin-top:26px">© 2026 Quick Solution — Furniture & Home</footer>

<script>
/* ---------- Product data: furniture (replace image paths) ---------- */
const products = [
  {
    id: 'sofa-1',
    title: 'Modern 3-Seater Sofa',
    price: 45000,
    desc: 'Comfortable 3-seater sofa with high-density foam and hardwood frame.',
    variants: { Color: ['Charcoal','Beige','Navy'], Fabric: ['Linen','Velvet'] },
    images: ['img/sofa-1a.jpg','img/sofa-1b.jpg','img/sofa-1c.jpg']
  },
  {
    id: 'ottoman-1',
    title: 'Storage Ottoman',
    price: 8500,
    desc: 'Multi-purpose ottoman with hidden storage and removable top.',
    variants: { Color: ['Grey','Brown'], Size: ['Small','Large'] },
    images: ['img/ottoman-1a.jpg','img/ottoman-1b.jpg','img/ottoman-1c.jpg']
  },
  {
    id: 'stool-1',
    title: 'Accent Stool',
    price: 3200,
    desc: 'Stylish accent stool with wooden legs and cushioned seat.',
    variants: { Color: ['Oak','Walnut'], Upholstery: ['Fabric','Leatherette'] },
    images: ['img/stool-1a.jpg','img/stool-1b.jpg','img/stool-1c.jpg']
  }
];

/* ---------- State & persistence ---------- */
const STORAGE_KEY = 'qs_furniture_cart_v1';
let cart = loadCart(); // { key: { key, productId, product, variant, variantText, qty } }

const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));

function saveCart(){ try { localStorage.setItem(STORAGE_KEY, JSON.stringify(cart)); } catch(e){} updateCartCount(); }
function loadCart(){ try { const raw = localStorage.getItem(STORAGE_KEY); return raw ? JSON.parse(raw) : {}; } catch(e){ return {}; } }
function updateCartCount(){ const count = Object.values(cart).reduce((s,i)=> s + i.qty, 0); $('#cartCount').textContent = count; $('#cartSummary') && ($('#cartSummary').textContent = `${count} items`); }

/* ---------- Render products ---------- */
function createProductCard(product){
  const el = document.createElement('article');
  el.className = 'product';
  // default variant selection (first option of each variant)
  const defaultVariant = {};
  if(product.variants){
    Object.keys(product.variants).forEach(k => defaultVariant[k] = product.variants[k][0]);
  }
  el.innerHTML = `
    <div class="carousel" data-id="${product.id}">
      <button class="arrow left" aria-label="Previous image">&lt;</button>
      <div class="carousel-track">
        ${product.images.map(src => `<div class="carousel-slide"><img src="${src}" alt="${product.title}"></div>`).join('')}
      </div>
      <button class="arrow right" aria-label="Next image">&gt;</button>
      <div class="dots">${product.images.map((_,i)=>`<div class="dot ${i===0? 'active':''}" data-index="${i}"></div>`).join('')}</div>
    </div>

    <h3>${product.title}</h3>
    <p>${product.desc}</p>
    <div class="price">Rs. ${product.price.toLocaleString()}</div>

    <div class="variant-row" data-product="${product.id}">
      ${Object.keys(product.variants || {}).map(vk => `
        <div style="min-width:100%;margin-top:6px">
          <div style="font-size:13px;color:var(--muted);margin-bottom:6px">${vk}</div>
          ${product.variants[vk].map((opt,i)=>`<button class="variant-btn ${i===0? 'active':''}" data-variant="${vk}" data-value="${opt}" data-product="${product.id}">${opt}</button>`).join('')}
        </div>
      `).join('')}
    </div>

    <div class="actions">
      <button class="btn btn-outline" data-action="view" data-id="${product.id}">View</button>
      <button class="btn btn-primary" data-action="add" data-id="${product.id}" data-variant='${JSON.stringify(defaultVariant)}'>Add to cart</button>
    </div>
  `;
  return el;
}

const grid = $('#productGrid');
products.forEach(p => grid.appendChild(createProductCard(p)));

/* ---------- Carousel + zoom + lightbox ---------- */
function initCarousels(){
  const carousels = $$('.carousel');
  carousels.forEach(car => {
    const track = car.querySelector('.carousel-track');
    const slides = Array.from(track.children);
    const left = car.querySelector('.arrow.left');
    const right = car.querySelector('.arrow.right');
    const dots = Array.from(car.querySelectorAll('.dot'));
    let index = 0;
    let startX = 0, currentX = 0, dragging=false;

    function update(){ track.style.transform = `translateX(-${index * 100}%)`; dots.forEach((d,i)=> d.classList.toggle('active', i===index)); }

    left.addEventListener('click', ()=> { index = Math.max(0, index-1); update(); });
    right.addEventListener('click', ()=> { index = Math.min(slides.length-1, index+1); update(); });
    dots.forEach(d => d.addEventListener('click', e => { index = Number(e.currentTarget.dataset.index); update(); }));

    // touch swipe
    track.addEventListener('touchstart', e => { startX = e.touches[0].clientX; dragging = true; track.style.transition = 'none'; }, {passive:true});
    track.addEventListener('touchmove', e => { if(!dragging) return; currentX = e.touches[0].clientX; const dx = currentX - startX; track.style.transform = `translateX(calc(-${index * 100}% + ${dx}px))`; }, {passive:true});
    track.addEventListener('touchend', e => { dragging = false; track.style.transition = ''; const dx = currentX - startX; if(Math.abs(dx) > 50){ if(dx < 0) index = Math.min(slides.length-1, index+1); else index = Math.max(0, index-1); } update(); startX = currentX = 0; });

    // mouse drag
    let mouseDown=false, mouseStartX=0, mouseCurrentX=0;
    track.addEventListener('mousedown', e => { mouseDown=true; mouseStartX=e.clientX; track.style.transition='none'; });
    window.addEventListener('mousemove', e => { if(!mouseDown) return; mouseCurrentX = e.clientX; const dx = mouseCurrentX - mouseStartX; track.style.transform = `translateX(calc(-${index * 100}% + ${dx}px))`; });
    window.addEventListener('mouseup', e => { if(!mouseDown) return; mouseDown=false; track.style.transition=''; const dx = mouseCurrentX - mouseStartX; if(Math.abs(dx) > 60){ if(dx < 0) index = Math.min(slides.length-1, index+1); else index = Math.max(0, index-1); } update(); });

    // image interactions
    slides.forEach(slide => {
      const img = slide.querySelector('img');
      // double-tap to zoom on touch
      let lastTap = 0;
      img.addEventListener('touchend', e => {
        const now = Date.now();
        if(now - lastTap < 300){ toggleZoom(img); }
        lastTap = now;
      });
      // click opens lightbox on desktop
      img.addEventListener('click', e => {
        if(window.matchMedia('(hover: none)').matches) return;
        openLightbox(img.src);
      });
      function toggleZoom(image){
        const zoomed = image.classList.toggle('zoomed');
        if(!zoomed){ image.style.transform = ''; image.dataset.offsetX = 0; image.dataset.offsetY = 0; }
      }
      // pan when zoomed
      let startTouchX=0, startTouchY=0, originX=0, originY=0;
      img.addEventListener('touchstart', e => { if(!img.classList.contains('zoomed')) return; const t = e.touches[0]; startTouchX = t.clientX; startTouchY = t.clientY; originX = parseFloat(img.dataset.offsetX || 0); originY = parseFloat(img.dataset.offsetY || 0); }, {passive:true});
      img.addEventListener('touchmove', e => { if(!img.classList.contains('zoomed')) return; const t = e.touches[0]; const dx = t.clientX - startTouchX; const dy = t.clientY - startTouchY; img.style.transform = `scale(2) translate(${(originX + dx/2)}px, ${(originY + dy/2)}px)`; img.dataset.offsetX = originX + dx/2; img.dataset.offsetY = originY + dy/2; }, {passive:true});
    });

    update();
  });
}

/* ---------- Lightbox ---------- */
function openLightbox(src){
  $('#lightboxImg').src = src;
  $('#lightbox').style.display = 'flex';
  $('#lightbox').setAttribute('aria-hidden','false');
}
function closeLightbox(){
  $('#lightbox').style.display = 'none';
  $('#lightbox').setAttribute('aria-hidden','true');
}
$('#lightboxClose').addEventListener('click', closeLightbox);
$('#lightbox').addEventListener('click', e => { if(e.target === $('#lightbox')) closeLightbox(); });

/* ---------- Cart rendering & actions ---------- */
const cartModal = $('#cartModal');
const cartItemsEl = $('#cartItems');
const cartTotalEl = $('#cartTotal');

function openModal(){ cartModal.style.display = 'flex'; cartModal.setAttribute('aria-hidden','false'); renderCart(); }
function closeModal(){ cartModal.style.display = 'none'; cartModal.setAttribute('aria-hidden','true'); }

function variantKeyFromSelection(productId, selectedVariants){
  return `${productId}::${Object.keys(selectedVariants).map(k=>`${k}=${selectedVariants[k]}`).join('|')}`;
}

function renderCart(){
  cartItemsEl.innerHTML = '';
  const entries = Object.values(cart);
  if(entries.length === 0){
    cartItemsEl.innerHTML = '<p style="color:var(--muted);margin:8px 0">Your cart is empty.</p>';
    cartTotalEl.textContent = 'Total: Rs. 0';
    updateCartCount();
    return;
  }
  let total = 0;
  entries.forEach(item => {
    const row = document.createElement('div');
    row.className = 'cart-item';
    const variantText = item.variantText ? `<div style="color:var(--muted);font-size:13px">${item.variantText}</div>` : '';
    row.innerHTML = `
      <img src="${item.product.images[0]}" alt="${item.product.title}">
      <div class="meta">
        <div style="font-weight:700">${item.product.title}</div>
        ${variantText}
        <div style="color:var(--muted);font-size:13px">Rs. ${item.product.price.toLocaleString()} each</div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px">
        <div class="qty-controls" data-key="${item.key}">
          <button aria-label="Decrease quantity" data-op="dec">-</button>
          <div style="min-width:36px;text-align:center">${item.qty}</div>
          <button aria-label="Increase quantity" data-op="inc">+</button>
        </div>
        <div style="font-weight:700">Rs. ${(item.qty * item.product.price).toLocaleString()}</div>
        <button class="remove-btn" data-op="remove" data-key="${item.key}" aria-label="Remove item">Remove</button>
      </div>
    `;
    cartItemsEl.appendChild(row);
    total += item.qty * item.product.price;
  });
  cartTotalEl.textContent = `Total: Rs. ${total.toLocaleString()}`;
  updateCartCount();
}

/* Handle qty and remove */
cartItemsEl.addEventListener('click', e => {
  const btn = e.target.closest('button');
  if(!btn) return;
  const op = btn.dataset.op;
  const key = btn.dataset.key;
  if(!op || !key) return;
  if(op === 'inc') cart[key].qty++;
  else if(op === 'dec') cart[key].qty = Math.max(1, cart[key].qty - 1);
  else if(op === 'remove') delete cart[key];
  saveCart(); renderCart();
});

/* Clear cart */
$('#clearCartBtn').addEventListener('click', () => {
  if(confirm('Clear all items from cart?')) { cart = {}; saveCart(); renderCart(); }
});
$('#continueBtn').addEventListener('click', closeModal);

/* Confirm -> WhatsApp */
$('#confirmBtn').addEventListener('click', () => {
  const entries = Object.values(cart);
  if(entries.length === 0) return;
  let message = 'Quick Solution Furniture Order:%0A';
  entries.forEach(it => {
    const variantLine = it.variantText ? ` (${it.variantText})` : '';
    message += `${it.product.title}${variantLine} x ${it.qty} = Rs.${(it.qty * it.product.price)}%0A`;
  });
  const total = entries.reduce((s,it)=> s + it.qty * it.product.price, 0);
  message += `%0ATotal: Rs.${total}%0A%0APlease deliver to: `;
  const wa = `https://wa.me/923182086906?text=${message}`;
  window.open(wa, '_blank');
});

/* Cancel / open cart */
$('#cancelBtn').addEventListener('click', closeModal);
$('#openCart').addEventListener('click', openModal);

/* Add to cart & variant selection handlers */
document.body.addEventListener('click', e => {
  const btn = e.target.closest('button');
  if(!btn) return;

  // variant selection buttons
  if(btn.classList.contains('variant-btn')){
    const productId = btn.dataset.product;
    const variantName = btn.dataset.variant;
    const value = btn.dataset.value;
    const siblings = Array.from(document.querySelectorAll(`.variant-btn[data-product="${productId}"][data-variant="${variantName}"]`));
    siblings.forEach(s => s.classList.remove('active'));
    btn.classList.add('active');
    return;
  }

  const action = btn.dataset.action;
  const id = btn.dataset.id;
  if(!action) return;

  const product = products.find(p => p.id === id);
  if(!product) return;

  // gather selected variants for this product
  const selectedVariants = {};
  const variantBtns = document.querySelectorAll(`.variant-btn[data-product="${id}"].active`);
  variantBtns.forEach(vb => selectedVariants[vb.dataset.variant] = vb.dataset.value);

  if(action === 'add'){
    const key = variantKeyFromSelection(id, selectedVariants);
    const variantText = Object.keys(selectedVariants).length ? Object.keys(selectedVariants).map(k=>`${k}: ${selectedVariants[k]}`).join(', ') : '';
    if(!cart[key]) cart[key] = { key, productId: id, product, variant: selectedVariants, variantText, qty: 1 };
    else cart[key].qty++;
    saveCart(); openModal();
  } else if(action === 'view'){
    openLightbox(product.images[0]);
  }
});

/* Close modal when clicking backdrop */
$('#cartModal').addEventListener('click', e => { if(e.target === $('#cartModal')) closeModal(); });

/* ---------- Init ---------- */
initCarousels();
renderCart();
saveCart();
</script>
</body>
</html>
